import t from"./polyfills-passive.bundle.min.js";import{g as e}from"./shared-import-_commonjsHelpers.bundle.min.js";function i(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var o="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,l=o||s||Function("return this")(),r=function(){return l.Date.now()},n=/\s/;var a=/^\s+/;function c(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}(t)+1).replace(a,""):t}var d=l.Symbol,h=Object.prototype,u=h.hasOwnProperty,f=h.toString,p=d?d.toStringTag:void 0;var m=Object.prototype.toString;var v=d?d.toStringTag:void 0;function y(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":v&&v in Object(t)?function(t){var e=u.call(t,p),i=t[p];try{t[p]=void 0;var o=!0}catch(t){}var s=f.call(t);return o&&(e?t[p]=i:delete t[p]),s}(t):function(t){return m.call(t)}(t)}var b=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,g=/^0o[0-7]+$/i,k=parseInt;function T(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==y(t)}(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=c(t);var o=_.test(t);return o||g.test(t)?k(t.slice(2),o?2:8):b.test(t)?NaN:+t}var E=Math.max,w=Math.min;function $(t,e,o){var s,l,n,a,c,d,h=0,u=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var i=s,o=l;return s=l=void 0,h=e,a=t.apply(o,i)}function v(t){var i=t-d;return void 0===d||i>=e||i<0||f&&t-h>=n}function y(){var t=r();if(v(t))return b(t);c=setTimeout(y,function(t){var i=e-(t-d);return f?w(i,n-(t-h)):i}(t))}function b(t){return c=void 0,p&&s?m(t):(s=l=void 0,a)}function _(){var t=r(),i=v(t);if(s=arguments,l=this,d=t,i){if(void 0===c)return function(t){return h=t,c=setTimeout(y,e),u?m(t):a}(d);if(f)return clearTimeout(c),c=setTimeout(y,e),m(d)}return void 0===c&&(c=setTimeout(y,e)),a}return e=T(e)||0,i(o)&&(u=!!o.leading,n=(f="maxWait"in o)?E(T(o.maxWait)||0,e):n,p="trailing"in o?!!o.trailing:p),_.cancel=function(){void 0!==c&&clearTimeout(c),h=0,s=d=l=c=void 0},_.flush=function(){return void 0===c?a:b(r())},_}var x={exports:{}};x.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var i,o=t.HTMLElement||t.Element,s={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:o.prototype.scroll||n,scrollIntoView:o.prototype.scrollIntoView},l=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,r=(i=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==a(arguments[0])?f.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):s.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(a(arguments[0])?s.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):f.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},o.prototype.scroll=o.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==a(arguments[0])){var t=arguments[0].left,e=arguments[0].top;f.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},o.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==a(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},o.prototype.scrollIntoView=function(){if(!0!==a(arguments[0])){var i=function(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}(this),o=i.getBoundingClientRect(),l=this.getBoundingClientRect();i!==e.body?(f.call(this,i,i.scrollLeft+l.left-o.left,i.scrollTop+l.top-o.top),"fixed"!==t.getComputedStyle(i).position&&t.scrollBy({left:o.left,top:o.top,behavior:"smooth"})):t.scrollBy({left:l.left,top:l.top,behavior:"smooth"})}else s.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function n(t,e){this.scrollLeft=t,this.scrollTop=e}function a(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(t,e){return"Y"===e?t.clientHeight+r<t.scrollHeight:"X"===e?t.clientWidth+r<t.scrollWidth:void 0}function d(e,i){var o=t.getComputedStyle(e,null)["overflow"+i];return"auto"===o||"scroll"===o}function h(t){var e=c(t,"Y")&&d(t,"Y"),i=c(t,"X")&&d(t,"X");return e||i}function u(e){var i,o,s,r,n=(l()-e.startTime)/468;r=n=n>1?1:n,i=.5*(1-Math.cos(Math.PI*r)),o=e.startX+(e.x-e.startX)*i,s=e.startY+(e.y-e.startY)*i,e.method.call(e.scrollable,o,s),o===e.x&&s===e.y||t.requestAnimationFrame(u.bind(t,e))}function f(i,o,r){var a,c,d,h,f=l();i===e.body?(a=t,c=t.scrollX||t.pageXOffset,d=t.scrollY||t.pageYOffset,h=s.scroll):(a=i,c=i.scrollLeft,d=i.scrollTop,h=n),u({scrollable:a,method:h,startTime:f,startX:c,startY:d,x:o,y:r})}}};var S=e(x.exports);document.addEventListener("alpine:init",(()=>{Alpine.store("theme-editor",{selected_section:null,selected_block:null,init(){document.addEventListener("shopify:section:select",(t=>{this.selected_section=t.detail})),document.addEventListener("shopify:section:deselect",(()=>{this.selected=null})),document.addEventListener("shopify:block:select",(t=>{this.selected_block={target:t.target,detail:t.detail}})),document.addEventListener("shopify:block:deselect",(()=>{this.selected_block=null}))}})})),window.ThemeModule_Carousel=(e,i=!1,o,s="horizontal")=>({section_id:e,mode:s,track:null,track_container:null,total_slides:0,current_slide:1,slides:[],track_left:0,track_top:0,transition:!1,isMouseDown:!1,scroll_left:0,start_x:0,has_thumbnails:!1,thumbnail_track:!1,theme_editor_start_index:null,autoplay_interval:null,autoplay_enabled:i,is_auto_playing:!1,manually_paused:!1,is_mouse_over:!1,is_focused:!1,current_block:null,autoplay_seconds:o,mounted(){Shopify.designMode&&(this._setUpDesignModeHandlers(),this.current_block=this.$store["theme-editor"].selected_block,this.$store["theme-editor"].selected_block&&this._setIndexFromThemeEditorEvent(this.$store["theme-editor"].selected_block.target,this.$store["theme-editor"].selected_block.detail)),S.polyfill(),this.track=this.$refs["carousel-track"],this.track_container=this.$refs["carousel-track-container"],this.track_left=this.track.getBoundingClientRect().left,this.track_top=this.track.getBoundingClientRect().top,this.$refs["carousel-thumbnails"]&&(this.has_thumbnails=!0),this.$refs["thumbnail-track"]&&(this.thumbnail_track=!0);this.track.addEventListener("scroll",(()=>{this.scrollEndListener()}),t);let e=Array.prototype.slice.call(this.track.children);for(let t=0;t<e.length;t++){const i=e[t].getElementsByTagName("a"),o=e[t].getElementsByTagName("button"),s=e[t].getElementsByTagName("img");this.slides.push({visible:!1,tabindex:0,elem:e[t],links:[].slice.call(i),buttons:[].slice.call(o),images:[].slice.call(s)})}this.total_slides=this.slides.length,this.$watch("current_slide",((t,e)=>{let i=this.slides[e-1].elem.querySelector("[data-product-single-media-wrapper]"),o=this.slides[t-1].elem.querySelector("[data-product-single-media-wrapper]");o&&(i.dispatchEvent(new CustomEvent("mediaHidden")),o.dispatchEvent(new CustomEvent("mediaVisible")),this.$nextTick((()=>{if(this.thumbnail_track){const t=this.$refs["carousel-thumbnails"].querySelector(".is-active");this.$refs["thumbnail-track"].scrollTo({left:t.offsetLeft-this.$refs["carousel-thumbnails"].offsetWidth/2+t.offsetWidth/2,behavior:"smooth"})}})))})),this.$el.closest("[data-product-section]")&&(this.current_media_id&&this.mediaChange(),this.$watch("current_media_id",(()=>{this.mediaChange()}))),this.setSlideMediaToEager(this.slides[1]),this.autoplay_enabled&&this.autoPlayInit(),this.setUpIO(),"vertical"===this.mode&&this._setUpVerticalScrollingHandler()},setUpIO(){const t=new Set;this.observer=new IntersectionObserver((e=>{e.forEach((e=>{const i=[].indexOf.call(e.target.parentElement.children,e.target);this.slides[i].links.forEach((t=>{t.tabIndex=e.isIntersecting?0:-1})),this.slides[i].buttons.forEach((t=>{t.tabIndex=e.isIntersecting?0:-1})),e.isIntersecting?t.add(i):t.delete(i)}));const i=Math.min(...t);if(void 0!==i&&i!==1/0){this.current_slide=i+1,i+1<this.total_slides&&this.slides[i+1].images.forEach((t=>{t.setAttribute("loading","eager")}))}}),{root:this.$root,threshold:.99});for(let t=0;t<this.slides.length;t++)this.observer.observe(this.slides[t].elem)},mediaChange(){let t=this.current_media_id.toString(),e=this.slides.findIndex((e=>e.elem.dataset.mediaId===t));-1!==e&&this.slideIntoView(this.slides[e])},getClosestSlide(){return this.slides.reduce(((t,e,i)=>{let o,s;return"vertical"===this.mode?(s=e.elem.getBoundingClientRect().top,o=Math.abs(this.track_top-s)):(s=e.elem.getBoundingClientRect().left,o=Math.abs(this.track_left-s)),t?o<=t.diff?{index:i,slide:e,diff:o}:t:{index:i,slide:e,diff:o}}),!1)},scrollEndListener:$((function(){this.transition&&(this.transition=!1)}),250),prevSlide(){this.transition=!0,this.$nextTick((()=>{this.slideIntoView(this.slides[this.current_slide-2])}))},nextSlide(){this.transition=!0,this.$nextTick((()=>{this.slideIntoView(this.slides[this.current_slide])}))},slideIntoView(t,e=!1){if(this.$refs["carousel-track"]&&t&&t.elem)if("vertical"===this.mode)this.$refs["carousel-track"].scrollTo({top:t.elem.offsetTop,behavior:e?"instant":"smooth",block:"nearest",inline:"start"});else{const i=t.elem.offsetLeft-this.$refs["carousel-track"].offsetLeft;let o=0;"snap-center"===this.$refs["carousel-track"].getAttribute("data-scroll-snap-align")&&(o=t.elem.getBoundingClientRect().width/2),this.$refs["carousel-track"].scrollTo({left:i-o,behavior:e?"instant":"smooth",block:"nearest",inline:"start"})}},thumbnailFocus(t){this.transition=!0,this.slideIntoView(this.slides[t])},thumbnailKeyPress(t){let e;e="left"===t?1===this.current_slide?this.total_slides:this.current_slide-1:this.current_slide===this.total_slides?1:this.current_slide+1;this.$refs["carousel-thumbnails"].querySelector(`[data-slide="${e}"]`).focus()},setSlideMediaToEager(t){if(void 0!==t){const e=t.elem.querySelector(".tile-media");e&&e.setAttribute("loading","eager")}},autoPlayInit(){this.startAutoPlay(),this.$watch("is_mouse_over",(t=>{t?this.stopAutoPlay():(this.autoplay_interval&&(clearInterval(this.autoplay_interval),this.autoplay_interval=null),this.startAutoPlay())})),this.$root.addEventListener("focusin",(t=>{this.has_focus=!0,this.handleFocus()})),this.$root.addEventListener("focusout",(t=>{this.has_focus=!1,this.handleFocus()})),Shopify.designMode&&Alpine.effect((()=>{null===Alpine.store("theme-editor").selected_block&&(this.manually_paused=!1,this.startAutoPlay())}))},startAutoPlay(){this.is_auto_playing=!0,this.autoplay_interval||(this.autoplay_interval=setInterval((()=>{this.manually_paused||this.nextSlide()}),1e3*this.autoplay_seconds))},stopAutoPlay(){this.is_auto_playing=!1,clearInterval(this.autoplay_interval)},manualToggleAutoPlay(){this.manually_paused=!this.manually_paused,this.manually_paused&&this.stopAutoPlay()},handleFocus:$((function(){this.has_focus,this.stopAutoPlay()}),250),_setIndexFromThemeEditorEvent(t,e){if(e.sectionId===this.section_id){const e=t,i=Array.from(e.closest(".carousel-track").children).indexOf(e);this.theme_editor_start_index=i,this.$nextTick((()=>{this.slideIntoView(this.slides[i],"vertical"===this.mode)})),this.autoplay_enabled&&(this.manually_paused=!0,this.stopAutoPlay())}},_setUpDesignModeHandlers(){document.addEventListener("shopify:block:select",(t=>{this._setIndexFromThemeEditorEvent(t.target,t.detail)}))},_setUpVerticalScrollingHandler(){let e=!1,i=!1,o=this.track.scrollTop||0;this.track.addEventListener("scroll",(()=>{const t=this.track.scrollTop,s=t<o,l=this.$root.getBoundingClientRect().top>=0,r=this.$root.getBoundingClientRect().bottom<window.innerHeight;s?(i&&(i=!1),l||e||1===this.current_slide||(scrollToTopOf(this.$root,0),e=!0,setTimeout((()=>{e=!1}),500))):(e&&(e=!1),r||i||this.current_slide===this.total_slides||(scrollToBottomOf(this.$root,0),i=!0,setTimeout((()=>{i=!1}),500))),o=t}),t)}});
